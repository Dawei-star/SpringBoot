# BigEvent 项目开发规则

## 一、项目结构规范

### 1.1 目录命名规范
- 使用小写字母和连字符（kebab-case）
- 组件目录：`components/`（注意拼写，不是 `compoent/`）
- 视图目录：`views/`
- API 目录：`api/`
- 工具目录：`utils/`
- 样式目录：`styles/`

### 1.2 文件命名规范
- Vue 组件：PascalCase（如 `ArticleCard.vue`）
- JavaScript 文件：camelCase（如 `request.js`）
- CSS/SCSS 文件：kebab-case（如 `design-system.scss`）
- 测试文件：`*.test.js` 或 `*.spec.js`

### 1.3 禁止的文件和目录
- ❌ 测试用的临时文件（如 `test.js`、`test.vue`）
- ❌ Vue 默认模板文件（如 `HelloWorld.vue`）
- ❌ 拼写错误的目录（如 `compoent/`）
- ❌ 空文件或只有注释的文件
- ❌ 构建产物（`dist/`、`target/`）应被 `.gitignore` 忽略

## 二、代码规范

### 2.1 Vue 组件规范
- 使用 `<script setup>` 语法
- 组件名使用 PascalCase
- Props 使用 `defineProps` 定义
- 使用 `ref`、`computed`、`watch` 等 Composition API
- 模板中使用语义化 HTML 标签

### 2.2 JavaScript 规范
- 使用 ES6+ 语法
- 使用 `const` 和 `let`，避免 `var`
- 函数使用箭头函数或 `function` 声明
- 异步操作使用 `async/await`
- 导出使用 `export` 和 `export default`

### 2.3 样式规范
- 使用 SCSS 预处理器
- 使用 CSS 变量（设计系统）
- 使用 BEM 命名或语义化类名
- 响应式设计使用媒体查询
- 支持深色模式（使用 CSS 变量）

### 2.4 注释规范
- 函数和类使用 JSDoc 注释
- 复杂逻辑添加行内注释
- 删除无用的注释代码
- 使用中文注释（项目要求）

## 三、API 和请求规范

### 3.1 API 文件组织
- 按功能模块划分（如 `article.js`、`user.js`）
- 使用统一的 `request.js` 封装
- 所有 API 调用使用 `async/await`
- 错误处理在拦截器中统一处理

### 3.2 请求规范
- GET 请求用于查询
- POST 请求用于创建
- PUT 请求用于更新
- PATCH 请求用于部分更新
- DELETE 请求用于删除

## 四、状态管理规范

### 4.1 Pinia Store
- Store 文件使用 camelCase（如 `token.js`）
- 使用 `defineStore` 定义
- 使用 `persist: true` 持久化存储
- Store 按功能模块划分

### 4.2 数据流
- 组件 → API → 后端
- 使用响应式数据（`ref`、`reactive`）
- 避免直接修改 props

## 五、路由规范

### 5.1 路由配置
- 使用动态导入（`() => import()`）实现代码分割
- 路由路径使用 kebab-case
- 路由名称使用 camelCase
- 公共路由不需要认证

### 5.2 路由守卫
- 使用 `beforeEach` 进行权限检查
- Token 验证在拦截器中处理
- 未登录用户重定向到登录页

## 六、错误处理规范

### 6.1 前端错误处理
- 使用全局错误处理（`errorHandler.js`）
- API 错误在拦截器中统一处理
- 用户友好的错误提示（使用 `ElMessage`）
- 401 错误自动跳转登录

### 6.2 后端错误处理
- 使用 `GlobalExceptionHandler` 统一处理
- 返回统一的 `Result` 格式
- 记录错误日志

## 七、性能优化规范

### 7.1 前端优化
- 使用代码分割和懒加载
- 图片使用 `loading="lazy"`
- 使用防抖和节流（`debounce`、`throttle`）
- 请求缓存（GET 请求）
- 使用骨架屏（Skeleton）

### 7.2 后端优化
- 使用 Redis 缓存
- 数据库查询优化（索引）
- API 限流（`@RateLimit`）
- 分页查询

## 八、安全规范

### 8.1 认证和授权
- 使用 JWT Token
- Token 存储在 Pinia Store（持久化）
- 后端验证 Token 有效性
- 角色权限控制（admin/user）

### 8.2 数据安全
- 密码使用 MD5 加密
- XSS 防护（`XssUtil`）
- SQL 注入防护（MyBatis 参数化查询）
- 文件上传验证

## 九、测试规范

### 9.1 测试文件
- 测试文件放在 `tests/` 目录
- 使用 `.test.js` 或 `.spec.js` 后缀
- 删除未使用的测试文件

### 9.2 测试内容
- 单元测试
- 集成测试
- E2E 测试（可选）

## 十、文档规范

### 10.1 代码文档
- README.md 说明项目结构和运行方式
- API 文档（可选）
- 数据库设计文档

### 10.2 开发文档
- 功能实现总结（完成后归档）
- 问题修复记录（完成后归档）
- 想法和思路（完成后归档或删除）

## 十一、Git 规范

### 11.1 提交信息
- `feat`: 新功能
- `fix`: 修复 Bug
- `docs`: 文档更新
- `style`: 代码格式
- `refactor`: 重构
- `perf`: 性能优化
- `test`: 测试相关
- `chore`: 构建过程

### 11.2 分支管理
- `main`: 主分支
- `develop`: 开发分支
- `feature/*`: 功能分支
- `fix/*`: 修复分支

## 十二、依赖管理

### 12.1 前端依赖
- 使用 `package.json` 管理
- 定期更新依赖版本
- 删除未使用的依赖

### 12.2 后端依赖
- 使用 `pom.xml` 管理
- 使用 Maven 管理依赖
- 定期更新依赖版本

## 十三、构建和部署

### 13.1 构建产物
- 前端：`dist/` 目录（应被 `.gitignore` 忽略）
- 后端：`target/` 目录（应被 `.gitignore` 忽略）
- 不要提交构建产物到 Git

### 13.2 环境配置
- 开发环境：`application-dev.yml`
- 测试环境：`application-test.yml`
- 生产环境：`application-pro.yml`

## 十四、代码审查清单

### 14.1 提交前检查
- [ ] 代码通过 ESLint 检查
- [ ] 删除未使用的导入和变量
- [ ] 删除调试代码（`console.log`）
- [ ] 删除注释掉的代码
- [ ] 测试功能正常
- [ ] 响应式设计正常
- [ ] 深色模式正常

### 14.2 代码质量
- [ ] 函数职责单一
- [ ] 变量命名清晰
- [ ] 代码注释充分
- [ ] 错误处理完善
- [ ] 性能优化到位

## 十五、常见问题

### 15.1 文件路径
- 使用 `@/` 别名指向 `src/`
- 相对路径使用 `./` 或 `../`
- 绝对路径使用 `/`（public 目录）

### 15.2 导入顺序
1. Vue 相关
2. 第三方库
3. 项目内部模块
4. 样式文件

### 15.3 组件通信
- 父子组件：Props 和 Events
- 兄弟组件：Pinia Store
- 跨层级：Provide/Inject
